---
- name: ğŸ“‚ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ğ¿ĞºÑƒ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
  file:
    path: /home/ubuntu/monitoring
    state: directory
    owner: ubuntu
    group: ubuntu
    mode: '0755'


- name: ğŸ“‚ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ğ¿ĞºÑƒ Ğ´Ğ»Ñ Prometheus
  file:
    path: /home/ubuntu/monitoring/prometheus
    state: directory
    owner: ubuntu
    group: ubuntu
    mode: '0755'

- name: ğŸ“‚ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ docker-compose.yml
  template:
    src: templates/docker-compose-monitoring.yml.j2
    dest: /home/ubuntu/monitoring/docker-compose.yml
    owner: ubuntu
    mode: '0644'

- name: ğŸ“‚ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ prometheus.yml
  template:
    src: templates/prometheus.yml.j2
    dest: /home/ubuntu/monitoring/prometheus/prometheus.yml
    owner: ubuntu
    mode: '0644'

- name: ğŸ³ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ÑÑ‚ĞµĞº Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
  command: docker-compose up -d
  args:
    chdir: /home/ubuntu/monitoring
  become_user: ubuntu
